<head>
    <meta name='viewport' content='width=device-width, initial-scale=1' charset='UTF-8'>
    <title>meep chock</title>
</head>

<body bgcolor='black' text='white'>
    <center>
        <font size=7>ðŸ¦Š</font><br>
        <select name='action' id='action' onchange='return_to_last_value()'>
            <option value='0'>Shock</option>
            <option value='1' selected='selected'>Vibrate</option>
            <option value='2'>Sound</option>
        </select><br>
        <input type='range' min='1' max='100' value='50' class='slider' id='myRange'><br>
        <span id='demo'></span><br>
        <button type='button' onclick='submit()' value='OK'>OK</button>
</body>
<script>
    var shock_value = 0;
    var vibrate_value = 0;
    var sound_value = 0;
    var option = document.getElementById('action');
    var slider = document.getElementById('myRange');
    var output = document.getElementById('demo');
    output.innerHTML = slider.value;
    slider.oninput = function () {
        if(option.value == 0){
            shock_value = this.value
        }
        if(option.value == 1){
            vibrate_value = this.value
        }
        if(option.value == 2){
            sound_value = this.value
        }
        output.innerHTML = this.value;
    }
    function submit() {
        fetch('/', {
            method: 'POST',
            headers: {
                'Accept': 'application/x-www-form-urlencoded',
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: 'i=' + slider.value + '&type=' + action.value
        })
    }
    function return_to_last_value() {
        if(option.value == 0){
            set_slider_value(shock_value)
            return
        }
        if(option.value == 1){
            set_slider_value(vibrate_value)
            return
        }
        if(option.value == 2){
            set_slider_value(sound_value)
            return
        }
    }
    function set_slider_value(x){
        slider.value = x
        output.innerHTML = x
    }
</script>